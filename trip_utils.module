<?php


function trip_utils_views_api() {
  return array(
    'api' => 3, 
    'template path' => drupal_get_path('module', 'trip_utils')
  );
}

/**
 * Implementation of hook_init().
 */
function trip_utils_init() {
  
  drupal_add_js(drupal_get_path('module', 'trip_utils') . '/trip_utils.js');
  drupal_add_css(drupal_get_path('module', 'trip_utils') . '/trip_utils.css');

}

function trip_utils_node_insert($node, $arg = 0) {
  db_merge('node')
    ->key(array('nid' => $node->nid))
    ->fields(array(
       'trip_last_comment' => $node->created,
     ))
    ->execute();
}


function trip_utils_comment_insert($comment) {
  db_merge('node')
  ->key(array('nid' => $comment->nid))
  ->fields(array(
     'trip_last_comment' => $comment->changed,
   ))
  ->execute();
}

